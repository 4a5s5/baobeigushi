<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- æ ¸å¿ƒSEOæ ‡ç­¾ -->
    <title>AIè¯­éŸ³åŠ©æ‰‹ | æ™ºèƒ½å¯¹è¯+æ–‡æœ¬è½¬è¯­éŸ³ - LibreTTS</title>
    <meta name="description" content="LibreTTS AIè¯­éŸ³åŠ©æ‰‹ï¼Œé›†æˆæ™ºèƒ½å¯¹è¯å’Œæ–‡æœ¬è½¬è¯­éŸ³åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§å£°éŸ³é€‰æ‹©ï¼Œå¯è°ƒèŠ‚è¯­é€Ÿå’Œè¯­è°ƒï¼Œæä¾›å³æ—¶è¯•å¬å’Œä¸‹è½½åŠŸèƒ½ã€‚">
    <meta name="keywords" content="AIå¯¹è¯,æ–‡æœ¬è½¬è¯­éŸ³,TTS,è¯­éŸ³åˆæˆ,åœ¨çº¿é…éŸ³,æ™ºèƒ½åŠ©æ‰‹,AIé…éŸ³,å…è´¹TTS,åœ¨çº¿æœ—è¯»">
    <meta name="author" content="Zwei">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://libretts.is-an.org/">
    
    <!-- Open Graphæ ‡ç­¾ -->
    <meta property="og:title" content="AIè¯­éŸ³åŠ©æ‰‹ | æ™ºèƒ½å¯¹è¯+æ–‡æœ¬è½¬è¯­éŸ³ - LibreTTS">
    <meta property="og:description" content="LibreTTS AIè¯­éŸ³åŠ©æ‰‹ï¼Œé›†æˆæ™ºèƒ½å¯¹è¯å’Œæ–‡æœ¬è½¬è¯­éŸ³åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§å£°éŸ³é€‰æ‹©ï¼Œå¯è°ƒèŠ‚è¯­é€Ÿå’Œè¯­è°ƒã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://libretts.is-an.org/">
    <meta property="og:image" content="https://libretts.is-an.org/image/TTS.png">
    <meta property="og:site_name" content="LibreTTS">
    <meta property="og:locale" content="zh_CN">
    
    <!-- Twitter Cardæ ‡ç­¾ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AIè¯­éŸ³åŠ©æ‰‹ | æ™ºèƒ½å¯¹è¯+æ–‡æœ¬è½¬è¯­éŸ³ - LibreTTS">
    <meta name="twitter:description" content="LibreTTS AIè¯­éŸ³åŠ©æ‰‹ï¼Œé›†æˆæ™ºèƒ½å¯¹è¯å’Œæ–‡æœ¬è½¬è¯­éŸ³åŠŸèƒ½ã€‚">
    <meta name="twitter:image" content="https://libretts.is-an.org/image/TTS.png">
    
    <!-- æ ·å¼å’Œè„šæœ¬å¼•ç”¨ - ä¼˜åŒ–åŠ è½½ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet" 
          onerror="this.onerror=null;this.href='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css';">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css"
          onerror="this.onerror=null;this.href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';">
    <link rel="stylesheet" href="style.css">
    
    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" type="image/png" href="image/TTS.png">
    <link rel="apple-touch-icon" href="image/TTS.png">
    <link rel="shortcut icon" type="image/png" href="image/TTS.png">

    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <!-- é¡µé¢åŠ è½½æ ·å¼ -->
    <style>
        .page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        .loader-content {
            text-align: center;
            color: white;
        }
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .page-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .page-content.loaded {
            opacity: 1;
        }
    </style>
    
    <!-- Umami Analytics -->
    <script defer src="https://umami.zwei.de.eu.org/script.js" data-website-id="70106ca4-d1e5-4563-b574-ba09c3b5db16"></script>
</head>
<body>
    <!-- é¡µé¢åŠ è½½å™¨ -->
    <div id="pageLoader" class="page-loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <h4>AIè¯­éŸ³åŠ©æ‰‹åŠ è½½ä¸­...</h4>
            <p>è¯·ç¨å€™ï¼Œæ­£åœ¨åˆå§‹åŒ–ç³»ç»Ÿ</p>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div id="pageContent" class="page-content">
    <!-- å¯†ç éªŒè¯å¼¹çª— -->
    <div id="passwordModal" class="modal" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); z-index:1000;">
        <div class="modal-dialog" style="max-width: 400px; margin: 15% auto;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">è¯·è¾“å…¥è®¿é—®å¯†ç </h5>
                </div>
                <div class="modal-body">
                    <input type="password" id="passwordInput" class="form-control" placeholder="å¯†ç ">
                    <div id="passwordError" class="alert alert-danger mt-2" style="display:none;"></div>
                </div>
                <div class="modal-footer">
                    <button id="passwordSubmit" class="btn btn-primary">æäº¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸»å¯¼èˆª -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-robot text-primary"></i>
                <span class="ml-2">AIè¯­éŸ³åŠ©æ‰‹</span>
            </a>
            <div class="navbar-nav ml-auto">
                <button class="btn btn-outline-primary btn-sm" id="toggleMode">
                    <i class="fas fa-exchange-alt"></i>
                    <span id="modeText">åˆ‡æ¢åˆ°TTSæ¨¡å¼</span>
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <!-- AIå¯¹è¯æ¨¡å¼ -->
        <div id="chatMode" class="mode-container">
            <div class="row justify-content-center">
                <!-- AIå¯¹è¯åŒºåŸŸ -->
                <div class="col-12 col-lg-8 mb-4">
                    <div class="card chat-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4 class="mb-0">
                                <i class="fas fa-comments text-white"></i>
                                AIæ™ºèƒ½å¯¹è¯
                            </h4>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-light" id="settingsBtn" title="è®¾ç½®">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="btn btn-sm btn-light" id="clearChatBtn" title="æ¸…ç©ºå¯¹è¯">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <!-- å¯¹è¯å†å² -->
                            <div id="chatHistory" class="chat-history">
                                <div class="welcome-message">
                                    <div class="text-center p-4">
                                        <i class="fas fa-robot fa-3x text-primary mb-3"></i>
                                        <h5>ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIè¯­éŸ³åŠ©æ‰‹ ğŸ¤–</h5>
                                        <p class="text-muted">æˆ‘å¯ä»¥å’Œä½ èŠå¤©ï¼Œå¹¶ä¸”ä¼šç”¨è¯­éŸ³æœ—è¯»æˆ‘çš„å›å¤å“¦ï½</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- è¾“å…¥åŒºåŸŸ -->
                            <div class="chat-input-area">
                                <div class="input-group">
                                    <textarea id="chatInput" class="form-control" placeholder="è¾“å…¥ä½ æƒ³è¯´çš„è¯..." rows="2"></textarea>
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" id="sendBtn" type="button">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è¯­éŸ³æ§åˆ¶é¢æ¿ -->
                <div class="col-12 col-lg-4 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-volume-up text-white"></i>
                                è¯­éŸ³æ§åˆ¶
                            </h5>
                        </div>
                        <div class="card-body">
                            <!-- è¯­éŸ³è®¾ç½® -->
                            <div class="form-group">
                                <label for="chatApi">é€‰æ‹©APIï¼š</label>
                                <div class="input-group">
                                    <select class="form-control" id="chatApi">
                                        <option value="edge-api">Edge API</option>
                                        <option value="oai-tts">OAI-TTS API</option>
                                    </select>
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary" type="button" id="manageChatApiBtn">
                                            <i class="fas fa-cog"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="chatSpeaker">é€‰æ‹©è¯­éŸ³ï¼š</label>
                                <select class="form-control" id="chatSpeaker">
                                    <option value="">åŠ è½½ä¸­...</option>
                                </select>
                            </div>

                            <div id="chatRateContainer" class="form-group">
                                <label for="chatRate">è¯­é€Ÿ: <span id="chatRateValue">0</span></label>
                                <input type="range" class="form-control-range" id="chatRate" min="-100" max="100" value="0">
                            </div>

                            <div id="chatPitchContainer" class="form-group">
                                <label for="chatPitch">è¯­è°ƒ: <span id="chatPitchValue">0</span></label>
                                <input type="range" class="form-control-range" id="chatPitch" min="-100" max="100" value="0">
                            </div>

                            <!-- æ’­æ”¾æ§åˆ¶ -->
                            <div class="audio-controls mt-4">
                                <h6>æ’­æ”¾æ§åˆ¶</h6>
                                <div class="btn-group btn-group-sm w-100 mb-3">
                                    <button class="btn btn-success" id="playBtn" disabled>
                                        <i class="fas fa-play"></i> æ’­æ”¾
                                    </button>
                                    <button class="btn btn-warning" id="pauseBtn" disabled>
                                        <i class="fas fa-pause"></i> æš‚åœ
                                    </button>
                                    <button class="btn btn-danger" id="stopBtn" disabled>
                                        <i class="fas fa-stop"></i> åœæ­¢
                                    </button>
                                    <button class="btn btn-info" id="replayBtn" disabled>
                                        <i class="fas fa-redo"></i> é‡æ’­
                                    </button>
                                </div>
                                
                                <audio id="chatAudio" controls class="w-100" style="display: none;">
                                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
                                </audio>
                            </div>

                            <!-- è‡ªåŠ¨æ’­æ”¾è®¾ç½® -->
                            <div class="form-check mt-3">
                                <input class="form-check-input" type="checkbox" id="autoPlay" checked>
                                <label class="form-check-label" for="autoPlay">
                                    è‡ªåŠ¨æ’­æ”¾AIå›å¤
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TTSæ¨¡å¼ -->
        <div id="ttsMode" class="mode-container" style="display: none;">
            <div class="row w-100 justify-content-center g-4">
                <!-- è¡¨å•å®¹å™¨ -->
                <div class="col-12 col-md-8 col-lg-6 col-xl-5 mb-3">
                    <div class="card shadow-sm h-100">
                        <div class="card-header text-center">
                            <h2>æ–‡æœ¬è½¬è¯­éŸ³</h2>
                        </div>
                        <div class="card-body">
                            <form id="text2voice-form">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="api">é€‰æ‹©APIï¼š</label>
                                        <div class="input-group">
                                            <select class="form-control" id="api" required>
                                                <option value="edge-api">Edge API</option>
                                                <option value="oai-tts">OAI-TTS API</option>
                                            </select>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button" id="manageApiBtn">
                                                    <i class="fas fa-cog"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <small id="apiTips" class="form-text text-muted"></small>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="speaker">é€‰æ‹©è¯­éŸ³ï¼š</label>
                                        <select class="form-control" id="speaker" required>
                                            <option value="">åŠ è½½ä¸­...</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <label for="text">è¾“å…¥æ–‡æœ¬ï¼š</label>
                                        <div id="pauseControls" class="input-group" style="width: auto;">
                                            <input type="number"
                                                   class="form-control form-control-sm"
                                                   id="pauseSeconds"
                                                   min="0.01"
                                                   max="100"
                                                   step="0.01"
                                                   style="width: 80px;"
                                                   placeholder="ç§’æ•°">
                                            <div class="input-group-append">
                                                <button class="btn btn-sm btn-outline-secondary" type="button" id="insertPause">
                                                    æ’å…¥åœé¡¿
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <textarea
                                        class="form-control"
                                        id="text"
                                        rows="4"
                                        required
                                        maxlength="100000"></textarea>
                                    <small id="charCount" class="form-text text-muted">0% (0/100000å•ä½)</small>
                                </div>

                                <!-- OAI-TTSä¸“ç”¨è®¾ç½® -->
                                <div id="instructionsContainer" class="form-group" style="display: none;">
                                    <label for="instructions">è¯­éŸ³æŒ‡ä»¤ï¼ˆå¯é€‰ï¼‰ï¼š</label>
                                    <input type="text" class="form-control" id="instructions" 
                                        placeholder="å¦‚ï¼šè¯·ç”¨æ¬¢å¿«å’Œå…´å¥‹çš„è¯­æ°”è¯´è¯">
                                    <small class="form-text text-muted">å¯ç”¨äºæŒ‡å¯¼è¯­éŸ³æƒ…æ„Ÿã€è¯­æ°”æˆ–é£æ ¼</small>
                                </div>

                                <div id="formatContainer" class="form-group" style="display: none;">
                                    <label for="audioFormat">éŸ³é¢‘æ ¼å¼ï¼š</label>
                                    <select class="form-control" id="audioFormat">
                                        <option value="mp3">MP3</option>
                                        <option value="opus">Opus</option>
                                        <option value="aac">AAC</option>
                                        <option value="flac">FLAC</option>
                                        <option value="wav">WAV</option>
                                        <option value="pcm">PCM</option>
                                    </select>
                                </div>

                                <!-- å…¶ä»–APIä½¿ç”¨çš„è¯­é€Ÿè¯­è°ƒè®¾ç½® -->
                                <div id="rateContainer" class="form-group">
                                    <label for="rate">è¯­é€Ÿ: <span id="rateValue">0</span></label>
                                    <input type="range" class="form-control-range" id="rate" name="rate" min="-100" max="100" value="0">
                                </div>

                                <div id="pitchContainer" class="form-group">
                                    <label for="pitch">è¯­è°ƒ: <span id="pitchValue">0</span></label>
                                    <input type="range" class="form-control-range" id="pitch" name="pitch" min="-100" max="100" value="0">
                                </div>

                                <div id="error" class="alert alert-danger" style="display: none;"></div>

                                <button type="button" class="btn btn-info btn-block mb-3" id="previewButton">è¯•å¬å‰20ä¸ªå­—</button>
                                <button type="button" class="btn btn-primary btn-block" id="generateButton">ç”Ÿæˆè¯­éŸ³</button>
                            </form>

                            <div class="mt-4" id="result">
                                <audio id="audio" controls class="w-100"></audio>
                                <a id="download" class="btn btn-success btn-block mt-3" href="#" download="voice.mp3">ä¸‹è½½è¯­éŸ³æ–‡ä»¶</a>
                            </div>

                            <div class="mt-4 text-center" id="loading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i> æ­£åœ¨ç”Ÿæˆè¯­éŸ³ï¼Œè¯·ç¨å€™...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å†å²è®°å½•å®¹å™¨ -->
                <div class="col-12 col-md-8 col-lg-6 col-xl-5 mb-3">
                    <div class="card shadow-sm h-100">
                        <div class="card-header text-center">
                            <h2>å†å²è®°å½•</h2>
                        </div>
                        <div class="card-body history-container">
                            <button onclick="clearHistory()" class="btn btn-warning btn-block mb-3">æ¸…é™¤å†å²</button>
                            <div id="historyItems"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AIè®¾ç½®å¼¹çª— -->
    <div class="modal fade" id="aiSettingsModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-robot"></i>
                        AIåŠ©æ‰‹è®¾ç½®
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="aiApiUrl">AI APIåœ°å€ï¼š</label>
                        <input type="url" class="form-control" id="aiApiUrl" 
                               placeholder="https://api.openai.com/v1/chat/completions">
                        <small class="form-text text-muted">æ”¯æŒOpenAIå…¼å®¹çš„APIæ¥å£</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="aiApiKey">APIå¯†é’¥ï¼š</label>
                        <input type="password" class="form-control" id="aiApiKey" 
                               placeholder="sk-...">
                    </div>
                    
                    <div class="form-group">
                        <label for="aiModel">æ¨¡å‹ï¼š</label>
                        <input type="text" class="form-control" id="aiModel" 
                               placeholder="gpt-3.5-turbo" value="gpt-3.5-turbo">
                    </div>
                    
                    <div class="form-group">
                        <label for="systemPrompt">ç³»ç»Ÿæç¤ºè¯ï¼ˆæ™ºèƒ½ä½“è®¾å®šï¼‰ï¼š</label>
                        <textarea class="form-control" id="systemPrompt" rows="6" 
                                  placeholder="ä½ æ˜¯ä¸€ä¸ªå‹å–„çš„AIåŠ©æ‰‹...">ä½ æ˜¯ä¸€ä¸ªå‹å–„ã€æœ‰è¶£çš„AIè¯­éŸ³åŠ©æ‰‹ã€‚è¯·ç”¨ç®€æ´ã€è‡ªç„¶çš„è¯­è¨€å›å¤ç”¨æˆ·ï¼Œä¿æŒå¯¹è¯è½»æ¾æ„‰å¿«ã€‚å›å¤é•¿åº¦æ§åˆ¶åœ¨100å­—ä»¥å†…ï¼Œé™¤éç”¨æˆ·ç‰¹åˆ«è¦æ±‚è¯¦ç»†è§£é‡Šã€‚</textarea>
                        <small class="form-text text-muted">è¿™é‡Œè®¾ç½®AIçš„è§’è‰²å’Œè¡Œä¸ºæ–¹å¼ï¼Œç±»ä¼¼æ™ºèƒ½ä½“çš„æç¤ºè¯</small>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="temperature">åˆ›é€ æ€§ (Temperature)ï¼š</label>
                            <input type="range" class="form-control-range" id="temperature" 
                                   min="0" max="2" step="0.1" value="0.7">
                            <small class="form-text text-muted">å€¼è¶Šé«˜å›å¤è¶Šæœ‰åˆ›æ„ï¼š<span id="tempValue">0.7</span></small>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="maxTokens">æœ€å¤§å›å¤é•¿åº¦ï¼š</label>
                            <input type="number" class="form-control" id="maxTokens" 
                                   value="150" min="50" max="1000">
                            <small class="form-text text-muted">æ§åˆ¶AIå›å¤çš„æœ€å¤§é•¿åº¦</small>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">å–æ¶ˆ</button>
                    <button type="button" class="btn btn-primary" id="saveAiSettings">ä¿å­˜è®¾ç½®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- è‡ªå®šä¹‰APIç®¡ç†å¼¹çª— -->
    <div class="modal fade" id="apiManagerModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ç®¡ç†è‡ªå®šä¹‰API</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> æ‚¨å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„TTS APIã€‚æ”¯æŒä¸¤ç§æ ¼å¼ï¼šOpenAIæ ¼å¼å’ŒEdge APIæ ¼å¼ã€‚
                    </div>
                    
                    <form id="customApiForm">
                        <div class="form-group">
                            <label for="apiName">APIåç§°</label>
                            <input type="text" class="form-control" id="apiName" placeholder="ä¾‹å¦‚: æˆ‘çš„è‡ªå®šä¹‰API" required>
                        </div>
                        <div class="form-group">
                            <label for="apiFormat">APIæ ¼å¼</label>
                            <select id="apiFormat" class="form-control">
                                <option value="openai">OpenAI æ ¼å¼</option>
                                <option value="edge">Edge API æ ¼å¼</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="apiEndpoint">APIç«¯ç‚¹URL</label>
                            <input type="url" class="form-control" id="apiEndpoint" placeholder="https://api.example.com/v1/audio/speech" required>
                        </div>
                        <div class="form-group">
                            <label for="apiKey">APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰</label>
                            <input type="password" class="form-control" id="apiKey" placeholder="sk-...">
                        </div>
                        <div class="form-group">
                            <label for="modelEndpoint">æ¨¡å‹åˆ—è¡¨ç«¯ç‚¹</label>
                            <input type="url" class="form-control" id="modelEndpoint" placeholder="https://api.example.com/v1/models">
                        </div>
                        <div class="form-group">
                            <label for="manualSpeakers">è‡ªå®šä¹‰è®²è¿°äººåˆ—è¡¨</label>
                            <textarea id="manualSpeakers" class="form-control" rows="2" placeholder="voice1,voice2,voice3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">ä¿å­˜API</button>
                    </form>
                    
                    <hr>
                    <h6>å·²ä¿å­˜çš„è‡ªå®šä¹‰API</h6>
                    <div id="savedApisList" class="list-group mt-3">
                        <!-- åŠ¨æ€åŠ è½½å·²ä¿å­˜çš„API -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center py-3 mt-3" style="background-color: #f8f9fa; font-size: 0.9rem;">
        <p class="mb-1">
            <a href="https://zwei.de.eu.org" target="_blank">Zwei</a> | 
            <a href="https://github.com/LibreSpark/LibreTTS" target="_blank">Code</a>
        </p>
        <p class="mb-0">
            ç”± <a href="https://www.nodeseek.com/post-305185-1" target="_blank">NodeSupport</a> å’Œ 
            <a href="https://yxvm.com/aff.php?aff=819" target="_blank">YXVM</a> èµåŠ©
        </p>
    </footer>
    </div> <!-- å…³é—­ pageContent -->

    <!-- å¯†ç éªŒè¯è„šæœ¬ -->
    <script>
        // æ£€æŸ¥æ˜¯å¦éœ€è¦å¯†ç 
        fetch('/api/check-password')
            .then(res => res.json())
            .then(data => {
                if (data.requirePassword && localStorage.getItem('authenticated') !== 'true') {
                    document.getElementById('passwordModal').style.display = 'block';
                }
            })
            .catch(err => {
                console.error('æ£€æŸ¥å¯†ç éœ€æ±‚å¤±è´¥', err);
            });
            
        document.getElementById('passwordSubmit').addEventListener('click', function() {
            const passValue = document.getElementById('passwordInput').value;
            fetch('/api/verify-password', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ password: passValue })
            })
            .then(res => {
                if (res.status === 200) return res.json();
                else throw new Error('å¯†ç é”™è¯¯');
            })
            .then(result => {
                if (result.valid) {
                    localStorage.setItem('authenticated', 'true');
                    document.getElementById('passwordModal').style.display = 'none';
                }
            })
            .catch(error => {
                const errBox = document.getElementById('passwordError');
                errBox.style.display = 'block';
                errBox.innerText = error.message;
            });
        });
    </script>

    <!-- ä¼˜åŒ–çš„è„šæœ¬åŠ è½½ -->
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåéšè—åŠ è½½å™¨
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('pageLoader').style.opacity = '0';
                document.getElementById('pageContent').classList.add('loaded');
                setTimeout(function() {
                    document.getElementById('pageLoader').style.display = 'none';
                }, 500);
            }, 500);
        });

        // è„šæœ¬åŠ è½½é”™è¯¯å¤„ç†
        function loadScript(src, fallbackSrc, callback) {
            const script = document.createElement('script');
            script.src = src;
            script.onload = callback;
            script.onerror = function() {
                if (fallbackSrc) {
                    const fallbackScript = document.createElement('script');
                    fallbackScript.src = fallbackSrc;
                    fallbackScript.onload = callback;
                    fallbackScript.onerror = function() {
                        console.error('Failed to load script:', src, 'and fallback:', fallbackSrc);
                        if (callback) callback();
                    };
                    document.head.appendChild(fallbackScript);
                } else {
                    console.error('Failed to load script:', src);
                    if (callback) callback();
                }
            };
            document.head.appendChild(script);
        }

        // æŒ‰é¡ºåºåŠ è½½è„šæœ¬
        loadScript(
            'https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js',
            'https://code.jquery.com/jquery-3.5.1.min.js',
            function() {
                loadScript(
                    'https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js',
                    'https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js',
                    function() {
                        loadScript(
                            'https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js',
                            'https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js',
                            function() {
                                // æœ€ååŠ è½½ä¸»è„šæœ¬ - ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬
                                const mainScript = document.createElement('script');
                                mainScript.src = 'script-optimized.js';
                                mainScript.onload = function() {
                                    console.log('æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆ');
                                };
                                mainScript.onerror = function() {
                                    console.error('ä¸»è„šæœ¬åŠ è½½å¤±è´¥ï¼Œå°è¯•åŠ è½½å¤‡ç”¨è„šæœ¬');
                                    // å°è¯•åŠ è½½åŸå§‹è„šæœ¬ä½œä¸ºå¤‡ç”¨
                                    const fallbackScript = document.createElement('script');
                                    fallbackScript.src = 'script.js';
                                    fallbackScript.onload = function() {
                                        console.log('å¤‡ç”¨è„šæœ¬åŠ è½½æˆåŠŸ');
                                    };
                                    fallbackScript.onerror = function() {
                                        showErrorToast('è„šæœ¬åŠ è½½å¤±è´¥ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨');
                                    };
                                    document.head.appendChild(fallbackScript);
                                };
                                document.head.appendChild(mainScript);
                            }
                        );
                    }
                );
            }
        );

        // é”™è¯¯æç¤ºå‡½æ•°
        function showErrorToast(message) {
            const toast = document.createElement('div');
            toast.className = 'alert alert-warning alert-dismissible fade show';
            toast.style.cssText = 'position:fixed;top:20px;right:20px;z-index:9999;max-width:300px;';
            toast.innerHTML = `
                ${message}
                <button type="button" class="close" data-dismiss="alert">
                    <span>&times;</span>
                </button>
            `;
            document.body.appendChild(toast);
            
            // 5ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(function() {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 5000);
        }
    </script>

</body>
</html>